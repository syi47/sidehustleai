 <!DOCTYPE html>
  <html>
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Reset Password - SideHustle AI</title>
      <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
      <style>
          body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
              display: flex;
              justify-content: center;
              align-items: center;
              min-height: 100vh;
              margin: 0;
              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
              padding: 20px;
          }
          .container {
              background: white;
              border-radius: 16px;
              padding: 40px;
              max-width: 400px;
              width: 100%;
              box-shadow: 0 10px 40px rgba(0,0,0,0.2);
          }
          h1 {
              color: #333;
              font-size: 28px;
              margin-bottom: 10px;
              text-align: center;
          }
          p {
              color: #666;
              text-align: center;
              margin-bottom: 30px;
          }
          input {
              width: 100%;
              padding: 14px;
              border: 2px solid #e0e0e0;
              border-radius: 8px;
              font-size: 16px;
              margin-bottom: 16px;
              box-sizing: border-box;
          }
          input:focus {
              outline: none;
              border-color: #667eea;
          }
          button {
              width: 100%;
              padding: 14px;
              background: #667eea;
              color: white;
              border: none;
              border-radius: 8px;
              font-size: 16px;
              font-weight: 600;
              cursor: pointer;
              margin-bottom: 10px;
          }
          button:hover {
              background: #5568d3;
          }
          button:disabled {
              background: #ccc;
              cursor: not-allowed;
          }
          .success {
              text-align: center;
              color: #10b981;
              font-size: 48px;
              margin-bottom: 20px;
          }
          .error {
              background: #fee;
              color: #c33;
              padding: 12px;
              border-radius: 8px;
              margin-bottom: 16px;
              text-align: center;
          }
          .hint {
              font-size: 14px;
              color: #999;
              text-align: center;
          }
      </style>
  </head>
  <body>
      <div class="container">
          <div id="form-container">
              <h1>Reset Your Password</h1>
              <p>Enter your new password below</p>
              <div id="error" class="error" style="display: none;"></div>
              <input type="password" id="password" placeholder="New password" />
              <input type="password" id="confirmPassword" placeholder="Confirm password" />
              <p class="hint">Password must be at least 6 characters</p>
              <button id="resetBtn" onclick="resetPassword()">Reset Password</button>
          </div>

          <div id="success-container" style="display: none; text-align: center;">
              <div class="success">ðŸŽ‰</div>
              <h1>Password Reset!</h1>
              <p>Your password has been successfully updated.</p>
              <p style="color: #667eea; font-weight: 600;">Return to the SideHustle AI app and log in with your new password.</p>
          </div>
      </div>

      <script>
          // Initialize Supabase
          const supabase = window.supabase.createClient(
              'https://ctpwxagixqyvwsqybqse.supabase.co',
              'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN0cHd4YWdpeHF5dndzcXlicXNlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI2Mjc4NzcsImV4cCI6MjA3ODIwMzg3N30.OtGIsLpk-L909PGCDir4YWPvUyCp9O1J_QbLzXS7z1U'
          );

          async function resetPassword() {
              const password = document.getElementById('password').value;
              const confirmPassword = document.getElementById('confirmPassword').value;
              const errorDiv = document.getElementById('error');
              const resetBtn = document.getElementById('resetBtn');

              // Validation
              if (!password || !confirmPassword) {
                  errorDiv.textContent = 'Please fill in all fields';
                  errorDiv.style.display = 'block';
                  return;
              }

              if (password.length < 6) {
                  errorDiv.textContent = 'Password must be at least 6 characters';
                  errorDiv.style.display = 'block';
                  return;
              }

              if (password !== confirmPassword) {
                  errorDiv.textContent = 'Passwords do not match';
                  errorDiv.style.display = 'block';
                  return;
              }

              // Reset password
              resetBtn.disabled = true;
              resetBtn.textContent = 'Resetting...';
              errorDiv.style.display = 'none';

              try {
                  const { error } = await supabase.auth.updateUser({
                      password: password
                  });

                  if (error) {
                      errorDiv.textContent = error.message;
                      errorDiv.style.display = 'block';
                      resetBtn.disabled = false;
                      resetBtn.textContent = 'Reset Password';
                  } else {
                      // Success!
                      document.getElementById('form-container').style.display = 'none';
                      document.getElementById('success-container').style.display = 'block';
                  }
              } catch (err) {
                  errorDiv.textContent = 'An error occurred. Please try again.';
                  errorDiv.style.display = 'block';
                  resetBtn.disabled = false;
                  resetBtn.textContent = 'Reset Password';
              }
          }

          // Allow Enter key to submit
          document.getElementById('confirmPassword').addEventListener('keypress', function(e) {
              if (e.key === 'Enter') resetPassword();
          });
      </script>
  </body>
  </html>
